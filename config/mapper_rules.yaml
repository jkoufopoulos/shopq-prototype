version: 1
defaults:
  importance: routine
rules:
  - name: critical_fraud_alert
    importance: critical
    reason: "Finance/security alerts with action required escalate to critical."
    when:
      attention: action_required
      domains_any: ["finance", "security"]
      subject_any:
        - "fraud"
        - "suspicious"
        - "unusual"
        - "unauthorized"
        - "lock your card"
        - "verify"
        - "double-check"

  - name: critical_security_incident
    importance: critical
    reason: "Security incident keywords should wake the user immediately."
    when:
      subject_any:
        - "data breach"
        - "security alert"
        - "account compromised"
        - "password reset required"

  - name: critical_payment_due_today
    importance: critical
    reason: "Explicit payment deadlines stay critical."
    when:
      attention: action_required
      subject_any:
        - "payment due today"
        - "bill due today"
        - "final notice"
        - "past due"

  - name: time_sensitive_deadline
    importance: time_sensitive
    reason: "Action required emails without fraud language are time sensitive."
    when:
      attention: action_required
      exclude_subject:
        - "autopay"
        - "auto-pay"
        - "verification code"
        - "otp"

  - name: time_sensitive_event
    importance: time_sensitive
    reason: "Calendar events should land in Coming Up."
    when:
      types_any: ["event"]

  - name: time_sensitive_shipment
    importance: time_sensitive
    reason: "Upcoming deliveries belong in Coming Up."
    when:
      domains_any: ["shopping"]
      subject_any:
        - "arriving"
        - "delivery"
        - "out for delivery"
        - "on its way"

  - name: routine_autopay
    importance: routine
    reason: "Autopay confirmations are FYI-only."
    when:
      subject_any:
        - "autopay scheduled"
        - "autopay processed"
        - "auto-pay confirmation"
        - "automatic payment"

  - name: routine_otp
    importance: routine
    reason: "Verification codes are routine."
    when:
      subject_any:
        - "verification code"
        - "otp"
        - "login code"
        - "one-time password"

  - name: routine_newsletter
    importance: routine
    reason: "Newsletters stay routine/noise."
    when:
      types_any: ["newsletter"]

  - name: routine_promotion
    importance: routine
    reason: "Promotions are treated as routine."
    when:
      types_any: ["promotion"]

  - name: routine_receipt
    importance: routine
    reason: "Receipts are informational only."
    when:
      types_any: ["receipt"]

  - name: routine_general_notification
    importance: routine
    reason: "Default fallback for plain notifications."
    when:
      types_any: ["notification"]
