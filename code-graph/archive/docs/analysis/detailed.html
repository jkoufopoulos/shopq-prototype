<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MailQ Codebase Analysis - Detailed View</title>
    <style>

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #2d3748;
            line-height: 1.6;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        nav {
            display: flex;
            gap: 1rem;
            margin-bottom: 0.5rem;
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: background 0.2s;
        }

        nav a:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        nav a.active {
            background: rgba(255, 255, 255, 0.3);
            font-weight: 600;
        }

        .meta {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        main {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: #718096;
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }

        .file-section {
            margin-bottom: 3rem;
        }

        .file-section h2 {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            color: #1a202c;
            border-bottom: 3px solid #667eea;
            padding-bottom: 0.5rem;
        }

        .file-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-left: 4px solid #667eea;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .file-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .file-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .file-path {
            font-family: 'SF Mono', Monaco, 'Courier New', monospace;
            font-size: 1rem;
            font-weight: 600;
            color: #2d3748;
        }

        .file-badge {
            background: #edf2f7;
            color: #4a5568;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
        }

        .ai-summary {
            background: linear-gradient(135deg, #f6e8ff 0%, #e9d5ff 100%);
            border-left: 4px solid #9f7aea;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 8px;
        }

        .ai-summary::before {
            content: "ü§ñ AI Summary";
            display: block;
            font-weight: 600;
            font-size: 0.85rem;
            color: #6b46c1;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .ai-summary p {
            color: #44337a;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .ai-relationships {
            background: linear-gradient(135deg, #e0f2fe 0%, #dbeafe 100%);
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 8px;
        }

        .ai-relationships::before {
            content: "üîó Relationships";
            display: block;
            font-weight: 600;
            font-size: 0.85rem;
            color: #1e40af;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .ai-relationships p {
            color: #1e3a8a;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .no-summary {
            background: #fed7d7;
            border-left-color: #fc8181;
        }

        .no-summary::before {
            content: "‚ö†Ô∏è No AI Summary";
            color: #c53030;
        }

        .no-summary p {
            color: #742a2a;
        }

        .file-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }

        .detail-section {
            background: #f7fafc;
            padding: 1rem;
            border-radius: 8px;
        }

        .detail-section h4 {
            color: #4a5568;
            font-size: 0.85rem;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .detail-section ul {
            list-style: none;
        }

        .detail-section li {
            color: #2d3748;
            padding: 0.4rem 0;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 0.85rem;
        }

        .detail-section li::before {
            content: "‚ñ∏ ";
            color: #667eea;
            font-weight: bold;
            margin-right: 0.5rem;
        }

        .empty-section {
            color: #a0aec0;
            font-style: italic;
            font-size: 0.9rem;
        }

        footer {
            background: #2d3748;
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 4rem;
        }

        footer a {
            color: #90cdf4;
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

    </style>
</head>
<body>
    <header>
        <h1>üìä MailQ Codebase Analysis</h1>
        <nav>
            <a href="summary.html">Summary</a>
            <a href="detailed.html" class="active">Detailed</a>
            <a href="graph.html">Dependencies</a>
        </nav>
        <div class="meta">
            Generated: October 22, 2025 at 03:07 |
            AI Summaries: 41/41
        </div>
    </header>

    <main>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">41</div>
                <div class="stat-label">Total Files</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">30</div>
                <div class="stat-label">Python Files</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">11</div>
                <div class="stat-label">JavaScript Files</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">5,654</div>
                <div class="stat-label">Lines of Code</div>
            </div>
        </div>

        <section class="file-section">
            <h2>üêç Python Backend (30 files)</h2>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This empty `__init__.py` file declares the `experiments/src` directory as a Python package, enabling its internal modules to be imported and organized within the project.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file marks `experiments.src` as a Python package, enabling other parts of the codebase to import modules from it (e.g., `from experiments.src import trainer`). Any code consuming `experiments.src` modules implicitly depends on this `__init__.py` for correct package resolution. Its role is purely structural, facilitating module organization and discoverability across the entire project.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">experiments/src/__init__.py</div>
                <div class="file-badge">1 lines</div>
            </div>

            <div class="file-details">

            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This legacy `ai_utils.py` file serves as a backward-compatible wrapper for email classification, delegating calls to the newer `mailq.LLMClassifier`, and includes a text cleaning utility, with a clear intention for deprecation.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file is a deprecated compatibility layer within the `experiments` module. It dynamically adds `mailq` to the Python path to import and utilize the `LLMClassifier` and `CategoryManager` from the `mailq` package, acting as a wrapper for email classification and providing a text cleaning utility. Older components within the codebase currently depend on its `classify_email` function, but are explicitly encouraged to migrate directly to `mailq.LLMClassifier` as this file is slated for removal.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">experiments/src/ai_utils.py</div>
                <div class="file-badge">55 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>_get_classifier()</li><li>clean_text()</li><li>classify_email()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file compares email classification performance between a local `MemoryClassifier` and GPT-4o, using a shared category system, focusing on pure classification without reasoning.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file is an experimental script that depends on `MemoryClassifier` and `CategoryManager` from the `mailq` directory, utilizing their definitions for categories and one of the classifiers. It integrates the OpenAI API to provide a GPT-4o classification, benchmarking its output against the local `MemoryClassifier`. Its role is evaluative; it's not a core operational component but an assessment tool to compare different classification models.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">experiments/src/compare_gemini_gpt.py</div>
                <div class="file-badge">353 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>classify_with_gpt()</li><li>check_rule_match()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file authenticates with the Google Gmail API using OAuth2 to fetch a specified number of recent emails, extracting their subject, sender, and a snippet for processing.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file serves as an API client, providing a utility function to fetch email data from Gmail via OAuth2. It depends on `token.json` and `credentials.json` located at the project's root (`../../credentials/`) for authentication. Other modules, likely within the `experiments` directory, would import and call its `fetch_unread_emails` function to retrieve email data for further processing.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">experiments/src/fetch_emails.py</div>
                <div class="file-badge">86 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>get_service()</li><li>fetch_unread_emails()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This script authenticates with Gmail, fetches user labels, and interactively configures AI-driven email categorization settings for selected labels, saving the schema to a JSON file.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file serves as an interactive setup wizard, depending on a pre-existing `credentials.json` file for Google OAuth and generating `token.json` for persistent credentials. Its main output, `label_schema.json`, is then consumed by other AI components responsible for email classification, which utilize the defined label descriptions and importance to process and organize messages. It acts as an initial configuration entry point for the system.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">experiments/src/label_setup.py</div>
                <div class="file-badge">75 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>get_gmail_service()</li><li>fetch_labels()</li><li>run_label_setup_wizard()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file provides utility functions for managing Gmail labels, including fetching existing labels, creating new ones, and applying them to specific emails.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file serves as a utility module for Gmail label management, depending on `fetch_emails.py` for acquiring an authenticated Gmail API service object. Its functions are likely imported and utilized by other parts of the codebase, such as email processing or categorization scripts, to programmatically interact with Gmail labels.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">experiments/src/label_utils.py</div>
                <div class="file-badge">50 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>get_gmail_labels()</li><li>apply_label_to_email()</li><li>create_gmail_label()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This utility script modifies `experiment_runner.py` by removing all code related to "priority" assignment, calculation, and display, effectively stripping out a specific feature from that file.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file is a standalone utility script that directly modifies `experiment_runner.py` by reading its content, applying string and regex replacements, and then overwriting the file. It depends only on Python's built-in `re` module and is not imported by any other component; instead, its role is to act as a code transformation tool, likely used during development or experimentation to reconfigure `experiment_runner.py` by disabling the priority feature.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">experiments/src/remove_priority.py</div>
                <div class="file-badge">29 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>remove_priority_from_file()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file initializes the MailQ package, exposing its core `RulesEngine` and `MemoryClassifier` components as part of its public API, and declares the package version.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file acts as the primary public interface and package initializer for the `mailq` system. It directly depends on `mailq/rules_engine.py` and `mailq/memory_classifier.py`, importing their classes to make them accessible directly from the `mailq` package namespace. Other parts of the codebase that utilize MailQ's core logic will typically import these components via `from mailq import RulesEngine`, establishing this `__init__.py` as a central access point to the system's core functionalities.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/__init__.py</div>
                <div class="file-badge">8 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Dependencies</h4>
                    <ul>
            <li>memory_classifier</li><li>rules_engine</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file initializes the MailQ FastAPI server, orchestrating core services like email classification and feedback management, defining API models, and integrating specialized endpoint routers.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file serves as the primary entry point and API layer for the MailQ application, setting up the FastAPI server and configuring global middleware. It instantiates and depends on `MemoryClassifier`, `CategoryManager`, and `FeedbackManager` for core email processing, passing these services as dependencies to integrated API routers from `mailq.api_debug` and `mailq.api_feedback`. This centralizes the instantiation and connection of various internal components to expose a comprehensive set of endpoints.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/api.py</div>
                <div class="file-badge">300 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Classes</h4>
                    <ul>
            <li>EmailInput (0 methods)</li><li>EmailBatch (0 methods)</li><li>ClassificationResult (0 methods)</li><li>OrganizeResponse (0 methods)</li><li>CategoryCreate (0 methods)</li><li>RuleCreate (0 methods)</li><li>RuleUpdate (0 methods)</li><li>Config (0 methods)</li><li class='empty-section'>+1 more...</li></ul></div>
                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>root()</li><li>health()</li></ul></div>
                <div class="detail-section">
                    <h4>Dependencies</h4>
                    <ul>
            <li>api_debug</li><li>api_feedback</li><li>api_organize</li><li>category_manager</li><li>feedback_manager</li><li>memory_classifier</li><li>rules_manager</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file provides utility functions to dynamically render a comprehensive HTML dashboard for visualizing MailQ's feedback, including statistics, correction patterns, and recent activities, based on provided data.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file acts as an HTML templating utility or presentation layer within the MailQ system. It is imported and utilized by `mailq/api_feedback.py`, which is likely an API endpoint responsible for gathering the necessary data and then calling `render_dashboard` to generate the HTML response for a web request. While it depends on standard Python libraries like `datetime` for formatting, it primarily relies on receiving structured data from other MailQ components (via `api_feedback.py`) to construct the visual dashboard.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/api_dashboard.py</div>
                <div class="file-badge">255 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>render_dashboard()</li><li>_get_dashboard_css()</li><li>_render_top_senders()</li><li>_render_patterns()</li><li>_render_recent_corrections()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file defines FastAPI debug endpoints to expose and summarize the results and statistics of the most recent email classification batch, aiding in runtime monitoring.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file serves as an API layer for debugging, imported and mounted by `mailq/api.py` into the main FastAPI application. It depends on the core classification processing logic (likely orchestrated by `api.py`) to actively update its global `last_batch_store` via the `set_last_batch` function. This enables developers to remotely monitor the outcome and performance of classification batches, providing immediate insights into system operations.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/api_debug.py</div>
                <div class="file-badge">93 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>set_last_batch()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file defines FastAPI endpoints for submitting user corrections on email classifications, retrieving learning statistics, and serving a feedback dashboard.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file acts as an API layer, providing external access to the feedback system. It critically depends on `mailq.feedback_manager` for handling the core business logic of recording and querying feedback, and utilizes `mailq.api_dashboard` to render its HTML dashboard. The `mailq/api.py` module imports this file's `APIRouter` to integrate these endpoints into the main application, making it the primary interface for user interaction with the feedback mechanism.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/api_feedback.py</div>
                <div class="file-badge">97 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Classes</h4>
                    <ul>
            <li>FeedbackInput (0 methods)</li><li>Config (0 methods)</li></ul></div>
                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>set_feedback_manager()</li></ul></div>
                <div class="detail-section">
                    <h4>Dependencies</h4>
                    <ul>
            <li>api_dashboard</li><li>feedback_manager</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file provides core logic for classifying a batch of emails, applying confidence thresholds, filtering labels, and collecting statistics, primarily for the `/api/organize` API endpoint.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file acts as a core logic component, specifically handling email classification for the `/api/organize` endpoint. It critically depends on an external `classifier` object (likely an AI model or rule engine) passed during runtime to perform the actual classification. The `mailq/api.py` module imports and utilizes the `classify_batch` function from this file, making it an essential backend processing layer for the Mailq API.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/api_organize.py</div>
                <div class="file-badge">175 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>classify_batch()</li><li>_update_stats()</li><li>_filter_labels()</li><li>_print_low_confidence()</li><li>_print_classification()</li><li>_create_error_result()</li><li>_print_summary()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file manages user-specific email categories, storing them in an SQLite database and providing methods to retrieve, initialize with defaults, and add custom categories.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file acts as a core data access and business logic component for email category management, used by `mailq/api.py` to expose category-related functionalities. It depends on `config/default_categories.py` to retrieve predefined category lists for initial user setup or when a user has no custom categories.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/category_manager.py</div>
                <div class="file-badge">118 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Classes</h4>
                    <ul>
            <li>CategoryManager (7 methods)</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file centralizes MailQ's core configuration, defining project paths, database location, enumerated email classification attributes (types, domains), and a comprehensive list of valid Gmail labels.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This configuration file serves as a central source of truth for MailQ's system-wide constants, making it a foundational dependency for numerous other components. Modules like database connectors, data classification logic, or any part interacting with Gmail labels will import these definitions, ensuring consistent paths, data categories, and valid label structures across the codebase. While it indirectly references `Schema.json` and `mapping.py` for its definitions, this file itself is a core utility that *provides* these structured constants to the rest of the MailQ system.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/config/__init__.py</div>
                <div class="file-badge">112 lines</div>
            </div>

            <div class="file-details">

            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file provides a centralized SQLite database configuration, managing connections, transactions, and schema validation to serve as the core data access layer for the 'mailq' application.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file serves as the foundational data access layer for the `mailq` application, providing the necessary utilities to connect to, manage, and interact with the SQLite database. Components such as `mailq/rules_manager.py` explicitly depend on it to perform all database operations, ensuring consistent connection settings, transaction handling, and schema integrity without needing to directly interact with the `sqlite3` module. It itself relies only on Python's standard library for its functionality.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/config/database.py</div>
                <div class="file-badge">234 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>get_db_path()</li><li>get_db_connection()</li><li>db_transaction()</li><li>execute_query()</li><li>validate_schema()</li><li>get_test_db_connection()</li><li>init_database()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file defines a constant list of default email categories, each with a name, description, and color, intended for new user accounts within the MailQ system.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file acts as a self-contained configuration data source, defining a `DEFAULT_CATEGORIES` list without any external dependencies. Other `mailq` system components, such as user creation or email processing modules, would import and utilize this list to initialize default email categories for new users. Its role is to provide a standardized, pre-defined set of initial categorization options for the application.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/config/default_categories.py</div>
                <div class="file-badge">49 lines</div>
            </div>

            <div class="file-details">

            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file centralizes application-wide settings, environment variables, API configurations, and feature flags by reading values from environment variables or providing sensible defaults for the MailQ application.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file primarily depends on the `os` module to read environment variables and `pathlib.Path` for defining project directory structures. Virtually every other component within the `mailq` application, including API endpoints, AI classification logic, feature flag checks, and logging setup, imports and utilizes these settings to configure their behavior and integrate with external services like Google Cloud or OpenAI. It acts as the core configuration provider, centralizing all configurable parameters to ensure consistent application-wide behavior across different environments.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/config/settings.py</div>
                <div class="file-badge">77 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>is_production()</li><li>is_development()</li><li>get_env()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> The `FeedbackManager` class stores user corrections, learns classification patterns, and manages few-shot examples in a SQLite database to continuously improve the `mailq` system's email classification accuracy.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file acts as a core data persistence layer, managing a SQLite database for feedback and learning. It depends on standard Python libraries like `sqlite3` for database interaction. Other components, specifically `mailq/api.py` and `mailq/api_feedback.py`, utilize this manager to store user corrections and retrieve learned patterns, while `mailq/vertex_gemini_classifier.py` likely fetches patterns and few-shot examples to enhance its AI-driven classification process.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/feedback_manager.py</div>
                <div class="file-badge">365 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Classes</h4>
                    <ul>
            <li>FeedbackManager (11 methods)</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file provides a utility function to centrally configure and return a standardized Python logger that outputs formatted messages to standard output, preventing duplicate handlers.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file serves as a utility for centralized, consistent logging within the `mailq` application. It depends on Python's built-in `logging` and `sys` modules to configure loggers that output formatted messages to `sys.stdout`. Other components, such as `mailq/rules_engine.py`, import and use its `setup_logger` function to acquire these pre-configured loggers, ensuring uniform log output across the system.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/logger.py</div>
                <div class="file-badge">21 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>setup_logger()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file is a utility that converts semantic email classification results, encompassing dimensions like type, domain, and attention, into a structured list of Gmail label strings based on defined confidence thresholds.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file acts as a core mapping utility, primarily imported and used by `mailq/memory_classifier.py`. It takes the raw classification output from `memory_classifier.py` and transforms it into an actionable format suitable for applying Gmail labels. Its role is to bridge the internal semantic classification logic with the external mechanism of organizing emails through labels.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/mapper.py</div>
                <div class="file-badge">120 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>map_to_gmail_labels()</li><li>validate_classification_result()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file provides a memory-enhanced email classifier that prioritizes rule-based classification, falling back to a Vertex AI Gemini LLM, and mapping results to Gmail labels.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file acts as the core classification logic, orchestrating rule-based matching using `mailq.rules_engine` and leveraging `mailq.vertex_gemini_classifier` for LLM inference when rules don't match. It further depends on `mailq.mapper` for result transformation and validation, and is a foundational component directly consumed by `mailq/api.py` to expose the primary email classification functionality.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/memory_classifier.py</div>
                <div class="file-badge">190 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Classes</h4>
                    <ul>
            <li>MemoryClassifier (5 methods)</li></ul></div>
                <div class="detail-section">
                    <h4>Dependencies</h4>
                    <ul>
            <li>mapper</li><li>rules_engine</li><li>vertex_gemini_classifier</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file implements a rules engine for email classification, storing user-defined and learned patterns in an SQLite database to categorize incoming messages based on various criteria.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file relies on `mailq/logger.py` for standardized logging across the application. As a core logic component, it is imported by `mailq/__init__.py`, making its `RulesEngine` class a publicly accessible part of the `mailq` package. Additionally, `mailq/memory_classifier.py` imports this file, likely integrating its persistent, database-backed email classification rules into a broader classification strategy.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/rules_engine.py</div>
                <div class="file-badge">282 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Classes</h4>
                    <ul>
            <li>RulesEngine (13 methods)</li></ul></div>
                <div class="detail-section">
                    <h4>Dependencies</h4>
                    <ul>
            <li>logger</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This module manages email classification rules by providing functions for CRUD operations like fetching, adding, updating, and deleting rules stored in the database.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file heavily depends on `mailq/config/database.py` to handle all its database connections and transactions for persistent storage of classification rules. It is imported and utilized by `mailq/api.py`, suggesting that the API layer exposes these rule management functionalities, making this file a core backend logic component for the system's rule-based email classification.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/rules_manager.py</div>
                <div class="file-badge">157 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>get_rules()</li><li>add_rule()</li><li>update_rule()</li><li>delete_rule()</li><li>get_rule_stats()</li></ul></div>
                <div class="detail-section">
                    <h4>Dependencies</h4>
                    <ul>
            <li>config/database</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This script consolidates various Mailq system databases, including rules and learned patterns, into a single `mailq.db` file, creating a unified and initialized data store.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This utility script is crucial for initializing and consolidating the Mailq application's central data store, `mailq.db`, defining its foundational schema for rules, categories, feedback, and learned patterns. It depends on an existing `rules.sqlite` file for initial data population and `sqlite3` for database operations. Crucially, all other Mailq components that manage or utilize email classification, rules, categories, or feedback will depend on the `mailq.db` created and maintained by this script as their primary data source.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/scripts/consolidate_databases.py</div>
                <div class="file-badge">204 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>consolidate()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This Python script connects to project SQLite databases, extracts table schema, row counts, and sample data, then prints a comprehensive diagnostic report to the console.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This utility script critically depends on the Python `sqlite3` module for database interaction and implicitly relies on the existence and structure of SQLite database files (e.g., `mailq.db`, `rules.db`) that are created and managed by other parts of the `mailq` application. It functions as a standalone developer tool, designed for direct command-line execution to debug or monitor the application's data stores, rather than being integrated into the core `mailq` runtime logic or being depended upon by other internal components.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/scripts/inspect_databases.py</div>
                <div class="file-badge">114 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>inspect_db()</li><li>main()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This file initializes a Vertex AI Gemini 2.0 Flash model to classify emails multi-dimensionally (type, domain, attention) using both static and dynamically learned few-shot examples from user feedback.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file depends on `mailq.feedback_manager.py` to retrieve learned classification patterns, dynamically enhancing its few-shot examples based on user corrections. Conversely, `mailq.memory_classifier.py` imports and likely utilizes this `VertexGeminiClassifier` as a core component for performing intelligent, multi-dimensional email classification within the broader MailQ system, acting as its AI-powered classification engine.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">mailq/vertex_gemini_classifier.py</div>
                <div class="file-badge">521 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Classes</h4>
                    <ul>
            <li>VertexGeminiClassifier (8 methods)</li></ul></div>
                <div class="detail-section">
                    <h4>Dependencies</h4>
                    <ul>
            <li>feedback_manager</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This script populates the `rules.db` database by reading manually labeled email classifications from a CSV file and adding them as rules via the `RulesEngine` component.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This utility script heavily depends on the `RulesEngine` class (imported from `mailq/rules_engine.py`) to store and manage the learned rules within `data/rules.db`. It consumes a "gold standard" CSV dataset (`data/100_emails/email_eval_dataset.csv`), effectively bootstrapping the foundational rule set that other core components, such as an API, will then utilize for live email classification.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">scripts/bootstrap_from_gold_standard.py</div>
                <div class="file-badge">95 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>bootstrap_rules()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This script authenticates with the Google Gmail API, fetches a specified count of recent emails, and extracts their subject, sender, and a snippet for further processing.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This file serves as an API integration layer, depending on Google's client libraries and specific `credentials/token.json` and `credentials/credentials.json` files for authentication with Gmail. Other components within the codebase would import and utilize its `fetch_unread_emails` function to retrieve raw email data, abstracting the complexities of Google API calls and user authentication. Its role is a core utility responsible for fetching email messages, acting as the primary data source from Gmail for the rest of the application.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">scripts/fetch_emails.py</div>
                <div class="file-badge">86 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>get_service()</li><li>fetch_unread_emails()</li></ul></div>
            </div>
        </div>

            <div class="ai-summary">
                <p><strong>Summary:</strong> This script safely fetches a large volume of unread Gmail emails in batches, creating a CSV dataset in the `data` directory, supporting resume and refresh operations.</p>
            </div>

            <div class="ai-relationships">
                <p><strong>Relationships:</strong> This script relies on `fetch_emails.py` (specifically `fetch_unread_emails`, though it calls an unimported `fetch_unread_emails_safe` function) to interact with the Gmail API for email retrieval, and uses `pandas` for dataset persistence and `os` for file management. Serving as a dedicated data generation utility, its primary role is to create large, API-safe email datasets stored in the `../data/` directory. Other components of the codebase, such as machine learning models or analysis scripts, would then read and consume these pre-generated datasets rather than directly importing functions from this utility.</p>
            </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">scripts/fetch_emails_bulk.py</div>
                <div class="file-badge">196 lines</div>
            </div>

            <div class="file-details">

                <div class="detail-section">
                    <h4>Functions</h4>
                    <ul>
            <li>create_bulk_dataset()</li><li>fetch_unread_emails_safe()</li><li>estimate_fetch_time()</li></ul></div>
            </div>
        </div>

        </section>

        <section class="file-section">
            <h2>üåê JavaScript Frontend (11 files)</h2>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">extension/background.js</div>
                <div class="file-badge">111 lines</div>
            </div>

            <div class="ai-summary">
                <p>SUMMARY: This file serves as the Mailq extension's background service worker, orchestrating the authentication, fetching, classification, and labeling of unread emails when the extension icon is clicked.

RELATIONSHIPS: This file is the central orchestrator and event-driven entry point for the Mailq extension, directly depending on `config.js` for settings and various modules (`auth.js`, `gmail.js`, `classifier.js`, `utils.js`, `telemetry.js`) for core functionalities. It communicates classification results to active Gmail content scripts via `chrome.tabs.sendMessage`, which then depend on this script to receive the necessary data for display or further processing.</p>
            </div>

            <div class="file-details">

            <div class="detail-section">
                <h4>Characteristics</h4>
                <ul>
        <li>ES6 Modules: ‚úÖ</li><li>Async/Await: ‚úÖ</li><li>HTTP Requests: ‚úÖ</li></ul></div>
                <div class="detail-section">
                    <h4>Imports</h4>
                    <ul>
            <li>config</li><li>modules/auth</li><li>modules/classifier</li><li>modules/gmail</li><li>modules/telemetry</li><li>modules/utils</li></ul></div>
            </div>
        </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">extension/config.js</div>
                <div class="file-badge">52 lines</div>
            </div>

            <div class="ai-summary">
                <p>SUMMARY: This file centralizes configuration settings, API endpoints, operational limits, storage keys, and default user preferences for the Mailq browser extension.

RELATIONSHIPS: This file acts as a central configuration module, providing essential constants like API endpoints, storage keys, and operational limits used by the Mailq extension. The `extension/background.js` script explicitly imports and depends on these global parameters to manage background operations and settings, while this file itself has no external dependencies.</p>
            </div>

            <div class="file-details">

            <div class="detail-section">
                <h4>Characteristics</h4>
                <ul>
        <li>ES6 Modules: ‚ùå</li><li>Async/Await: ‚ùå</li><li>HTTP Requests: ‚ùå</li></ul></div>
            </div>
        </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">extension/content.js</div>
                <div class="file-badge">100 lines</div>
            </div>

            <div class="ai-summary">
                <p>SUMMARY: This content script injects into Gmail, monitoring email label changes, storing AI classifications received from the background script, and sending label corrections back if user-applied labels differ from predictions.

RELATIONSHIPS: This file acts as the interface between the extension's background script and the Gmail DOM. It depends on the `chrome.runtime` API to receive email classifications from the background script and sends user-initiated label corrections back to it. Its role is to inject functionality directly into Gmail, observing user interactions and providing real-time feedback to the extension's core classification logic.</p>
            </div>

            <div class="file-details">

            <div class="detail-section">
                <h4>Characteristics</h4>
                <ul>
        <li>ES6 Modules: ‚úÖ</li><li>Async/Await: ‚úÖ</li><li>HTTP Requests: ‚ùå</li></ul></div>
            </div>
        </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">extension/modules/auth.js</div>
                <div class="file-badge">38 lines</div>
            </div>

            <div class="ai-summary">
                <p>SUMMARY: This module handles Gmail OAuth authentication by providing functions to programmatically retrieve and revoke user access tokens for a Chrome extension.

RELATIONSHIPS: This file serves as an authentication utility, depending on the Chrome `identity` API to handle OAuth token acquisition and revocation. It is imported by `extension/background.js`, which likely uses these functions to manage the user's login state and access to Gmail services for the extension's operations.</p>
            </div>

            <div class="file-details">

            <div class="detail-section">
                <h4>Characteristics</h4>
                <ul>
        <li>ES6 Modules: ‚ùå</li><li>Async/Await: ‚úÖ</li><li>HTTP Requests: ‚ùå</li></ul></div>
            </div>
        </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">extension/modules/budget.js</div>
                <div class="file-badge">80 lines</div>
            </div>

            <div class="ai-summary">
                <p>SUMMARY: This file manages the extension's spend tracking and budget enforcement, allowing other parts of the application to check against a daily cap, record actual costs, and retrieve spending statistics.

RELATIONSHIPS: This module is central to the extension's spend tracking and budget enforcement, importing configuration details from `config.js` for limits and storage keys, and date utilities from `utils.js`. Other extension components depend on this file's exported functions (`checkSpendBudget`, `recordSpend`, `getSpendStats`) to enforce spending limits, log costs, and display financial statistics, persisting all data via `chrome.storage.local`.</p>
            </div>

            <div class="file-details">

            <div class="detail-section">
                <h4>Characteristics</h4>
                <ul>
        <li>ES6 Modules: ‚úÖ</li><li>Async/Await: ‚úÖ</li><li>HTTP Requests: ‚ùå</li></ul></div>
                <div class="detail-section">
                    <h4>Imports</h4>
                    <ul>
            <li>modules/../config</li><li>modules/utils</li></ul></div>
            </div>
        </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">extension/modules/cache.js</div>
                <div class="file-badge">70 lines</div>
            </div>

            <div class="ai-summary">
                <p>SUMMARY: This module manages a local browser storage cache for email classification results, allowing retrieval of cached data and updates with new entries, while enforcing expiry and size limits.

RELATIONSHIPS: This utility module acts as a data caching layer. It explicitly depends on `extension/config.js` for critical settings like cache keys, expiry durations, and maximum entry limits, and relies on the `chrome.storage.local` API for its persistence. The `extension/modules/classifier.js` module imports this file, indicating it uses these caching functions to store its classification outcomes and retrieve previously processed email data, thereby reducing redundant classification requests.</p>
            </div>

            <div class="file-details">

            <div class="detail-section">
                <h4>Characteristics</h4>
                <ul>
        <li>ES6 Modules: ‚úÖ</li><li>Async/Await: ‚úÖ</li><li>HTTP Requests: ‚ùå</li></ul></div>
                <div class="detail-section">
                    <h4>Imports</h4>
                    <ul>
            <li>modules/../config</li></ul></div>
            </div>
        </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">extension/modules/classifier.js</div>
                <div class="file-badge">200 lines</div>
            </div>

            <div class="ai-summary">
                <p>SUMMARY: This module classifies emails by first checking a local cache, then sending unclassified emails (deduplicated by sender) to an external API, updating the cache with new classifications, and recording telemetry.

RELATIONSHIPS: This file acts as a core logic component for email classification, orchestrating interactions with an external Mailq API, a local caching mechanism (`cache.js`), and a telemetry system (`telemetry.js`). It depends on `config.js` for application-wide settings (e.g., API endpoints), and its primary `classifyEmails` function is imported and called by `extension/background.js` to perform classification tasks within the browser extension.</p>
            </div>

            <div class="file-details">

            <div class="detail-section">
                <h4>Characteristics</h4>
                <ul>
        <li>ES6 Modules: ‚úÖ</li><li>Async/Await: ‚úÖ</li><li>HTTP Requests: ‚úÖ</li></ul></div>
                <div class="detail-section">
                    <h4>Imports</h4>
                    <ul>
            <li>modules/../config</li><li>modules/cache</li><li>modules/telemetry</li></ul></div>
            </div>
        </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">extension/modules/gmail.js</div>
                <div class="file-badge">224 lines</div>
            </div>

            <div class="ai-summary">
                <p>SUMMARY: This file provides functions to interact with the Gmail API, primarily fetching and parsing a configurable number of unlabeled emails from the inbox, and managing Gmail labels.

RELATIONSHIPS: This module functions as the application's dedicated Gmail API layer, importing `CONFIG` from `../config.js` to determine operational parameters like `MAX_EMAILS`. It is a critical dependency for `extension/background.js`, which utilizes its exported functions to programmatically fetch, parse, and manage user emails and labels for the extension's core logic.</p>
            </div>

            <div class="file-details">

            <div class="detail-section">
                <h4>Characteristics</h4>
                <ul>
        <li>ES6 Modules: ‚úÖ</li><li>Async/Await: ‚úÖ</li><li>HTTP Requests: ‚úÖ</li></ul></div>
                <div class="detail-section">
                    <h4>Imports</h4>
                    <ul>
            <li>modules/../config</li></ul></div>
            </div>
        </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">extension/modules/notifications.js</div>
                <div class="file-badge">35 lines</div>
            </div>

            <div class="ai-summary">
                <p>SUMMARY: This file provides utility functions to display Chrome browser notifications for success, error, and daily email/spend statistics within the Mailq extension.

RELATIONSHIPS: This file acts as a utility module for user feedback, abstracting the `chrome.notifications` API. It depends on the browser's `chrome.notifications` API for its core functionality and dynamically imports `getDailyReport` from `./telemetry.js` to display usage statistics. Other parts of the Mailq extension would call these exported functions (e.g., `showSuccess`, `showError`) to inform the user about operation outcomes or periodic updates.</p>
            </div>

            <div class="file-details">

            <div class="detail-section">
                <h4>Characteristics</h4>
                <ul>
        <li>ES6 Modules: ‚úÖ</li><li>Async/Await: ‚úÖ</li><li>HTTP Requests: ‚ùå</li></ul></div>
            </div>
        </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">extension/modules/telemetry.js</div>
                <div class="file-badge">120 lines</div>
            </div>

            <div class="ai-summary">
                <p>SUMMARY: This file manages the collection, storage, and reporting of daily telemetry data, including email classification counts, tier distribution, and associated costs, within the browser extension.

RELATIONSHIPS: This module acts as a utility layer, depending on `../config.js` for constants and dynamically importing `budget.js` for broader spend data, to manage the extension's operational metrics. It's imported by `background.js` and `classifier.js` to record email classification events and their associated costs. Its primary role is to track daily usage and provide statistical reports on the extension's activity and resource consumption.</p>
            </div>

            <div class="file-details">

            <div class="detail-section">
                <h4>Characteristics</h4>
                <ul>
        <li>ES6 Modules: ‚úÖ</li><li>Async/Await: ‚úÖ</li><li>HTTP Requests: ‚ùå</li></ul></div>
                <div class="detail-section">
                    <h4>Imports</h4>
                    <ul>
            <li>modules/../config</li></ul></div>
            </div>
        </div>

        <div class="file-card">
            <div class="file-header">
                <div class="file-path">extension/modules/utils.js</div>
                <div class="file-badge">106 lines</div>
            </div>

            <div class="ai-summary">
                <p>SUMMARY: This file provides shared utility functions for extracting email domains, generating privacy-safe cache keys, managing user settings, and processing email lists within the extension.

RELATIONSHIPS: This file functions as a core utility module, exporting various helper functions used throughout the extension. Both `extension/background.js` and `extension/modules/budget.js` depend on it, importing functions to process emails (e.g., deduplicate, expand), generate secure cache keys, and retrieve user settings stored via `chrome.storage.local`.</p>
            </div>

            <div class="file-details">

            <div class="detail-section">
                <h4>Characteristics</h4>
                <ul>
        <li>ES6 Modules: ‚ùå</li><li>Async/Await: ‚úÖ</li><li>HTTP Requests: ‚ùå</li></ul></div>
            </div>
        </div>

        </section>
    </main>

    <footer>
        <p>MailQ Codebase Analyzer ‚Ä¢ Powered by Gemini Flash ‚Ä¢
        <a href="https://github.com/yourusername/mailq-prototype" target="_blank">GitHub</a></p>
    </footer>

    <script>
        // Add search/filter functionality
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üìä MailQ Codebase Viewer loaded');
        });
    </script>
</body>
</html>
