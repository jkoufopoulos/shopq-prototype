{
  "extension/background.js": {
    "name": "Background Service Worker",
    "layer": "extension",
    "runtime": "service_worker",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#extension-background-service-worker",
    "code": "extension/background.js",
    "tests": ["extension/tests/network.test.js"],
    "description": "MV3 service worker that schedules auto-organize runs, digest triggers, and routes messages between modules."
  },
  "extension/content.js": {
    "name": "Content Script",
    "layer": "extension",
    "runtime": "content_script",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#content-script--selector-monitor",
    "code": "extension/content.js",
    "tests": ["extension/tests/utils.test.js"],
    "description": "Injected Gmail script that observes DOM mutations, validates selectors, and forwards label corrections."
  },
  "extension/modules/auto-organize.js": {
    "name": "Auto-Organize Engine",
    "layer": "extension",
    "runtime": "service_worker",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#auto-organize-engine",
    "code": "extension/modules/auto-organize.js",
    "tests": ["extension/tests/network.test.js"],
    "description": "Schedules inbox sweeps, orchestrates classification cycles, and flags pending digests."
  },
  "extension/modules/classifier.js": {
    "name": "Classifier Pipeline (Extension)",
    "layer": "extension",
    "runtime": "service_worker",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#extension-classification-pipeline",
    "code": "extension/modules/classifier.js",
    "tests": ["extension/tests/mapper.test.js", "extension/tests/verifier.test.js"],
    "description": "Deduplicates threads, checks cache, calls the backend, and maps results to Gmail labels."
  },
  "extension/modules/summary-email.js": {
    "name": "Summary Email Orchestrator",
    "layer": "extension",
    "runtime": "service_worker",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#digest--summary-pipeline-extension",
    "code": "extension/modules/summary-email.js",
    "tests": [],
    "description": "Collects classifications since the last digest, calls context-digest, and sends the HTML summary."
  },
  "extension/modules/context-digest.js": {
    "name": "Context Digest Client",
    "layer": "extension",
    "runtime": "service_worker",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#digest--summary-pipeline-extension",
    "code": "extension/modules/context-digest.js",
    "tests": [],
    "description": "Wrapper around `/api/context-digest` that logs timeline telemetry and renders digest cards."
  },
  "extension/modules/gmail.js": {
    "name": "Gmail API Adapter (Extension)",
    "layer": "extension",
    "runtime": "service_worker",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#auto-organize-engine",
    "code": "extension/modules/gmail.js",
    "tests": [],
    "description": "Handles Gmail REST calls for thread search, label application, and diagnostics."
  },
  "extension/modules/cache.js": {
    "name": "Classification Cache",
    "layer": "extension",
    "runtime": "service_worker",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#extension-classification-pipeline",
    "code": "extension/modules/cache.js",
    "tests": [],
    "description": "Manages sender+subject cache entries and cache statistics for the extension."
  },
  "extension/modules/logger.js": {
    "name": "Client Logger",
    "layer": "extension",
    "runtime": "service_worker",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#extension-classification-pipeline",
    "code": "extension/modules/logger.js",
    "tests": [],
    "description": "IndexedDB-backed logger for classifications used by summary-email and diagnostics."
  },
  "mailq/api.py": {
    "name": "FastAPI Gateway",
    "layer": "backend",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#fastapi-gateway",
    "code": "mailq/api.py",
    "tests": ["tests/integration/test_e2e_pipeline.py"],
    "description": "Public API surface that wires extension requests to organize, verify, and context digest handlers."
  },
  "mailq/api_organize.py": {
    "name": "Organize API Adapter",
    "layer": "backend",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#organize-api-adapter",
    "code": "mailq/api_organize.py",
    "tests": ["tests/integration/test_e2e_pipeline.py"],
    "description": "Bridges the legacy API contract to the refactored classification pipeline."
  },
  "mailq/usecases/pipeline.py": {
    "name": "Pipeline Coordinator",
    "layer": "backend",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#pipeline-coordinator",
    "code": "mailq/usecases/pipeline.py",
    "tests": ["tests/integration/test_e2e_pipeline.py", "tests/adapters/test_resilience.py"],
    "description": "Coordinates fetch → parse → classify → assemble flow and enforces idempotency."
  },
  "mailq/domain/classify.py": {
    "name": "Classification Domain Logic",
    "layer": "backend",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#classification-domain-logic",
    "code": "mailq/domain/classify.py",
    "tests": ["tests/llm/test_fallback.py"],
    "description": "Combines rules-based fallback and LLM invocation to produce validated classifications."
  },
  "mailq/context_digest.py": {
    "name": "Context Digest Engine",
    "layer": "backend",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#context-digest-engine",
    "code": "mailq/context_digest.py",
    "tests": [],
    "description": "Generates timeline-centric digests by orchestrating entity extraction and narrative synthesis."
  },
  "mailq/card_renderer.py": {
    "name": "Digest Card Renderer",
    "layer": "backend",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#digest-rendering--delivery",
    "code": "mailq/card_renderer.py",
    "tests": [],
    "description": "Renders HTML cards and Gmail search links used in the digest email."
  },
  "mailq/adapters/gmail/client.py": {
    "name": "Gmail Adapter (Backend)",
    "layer": "backend",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#gmail-adapters",
    "code": "mailq/adapters/gmail/client.py",
    "tests": ["tests/contracts/test_gmail_parser.py", "tests/adapters/test_resilience.py"],
    "description": "Fetches Gmail threads with retry/circuit protection and converts them into parsed domain models."
  },
  "infra/telemetry.py": {
    "name": "Telemetry Helpers",
    "layer": "backend",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#infrastructure--reliability-helpers",
    "code": "infra/telemetry.py",
    "tests": ["tests/infra/test_telemetry.py"],
    "description": "In-memory counters and timing utilities used across pipeline and adapters."
  },
  "infra/retry.py": {
    "name": "Retry & Circuit Primitives",
    "layer": "backend",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#infrastructure--reliability-helpers",
    "code": "infra/retry.py",
    "tests": ["tests/adapters/test_resilience.py"],
    "description": "Shared retry policy and circuit breaker used by adapters to handle transient failures."
  },
  "mailq/adapters/storage/checkpoint.py": {
    "name": "Storage Checkpoint Adapter",
    "layer": "backend",
    "doc": "docs/ARCHITECTURE_OVERVIEW.md#infrastructure--reliability-helpers",
    "code": "mailq/adapters/storage/checkpoint.py",
    "tests": [],
    "description": "Stubbed checkpoint layer for persisting digest metadata; called at the end of the pipeline."
  }
}
