# Dockerfile for Quality Monitor daemon
#
# Build:
#   docker build -f Dockerfile.quality-monitor -t mailq-quality-monitor .
#
# Run:
#   docker run -d \
#     --name mailq-quality-monitor \
#     --env-file .env \
#     -v $(pwd)/quality_monitor.db:/app/quality_monitor.db \
#     -v $(pwd)/quality_monitor.log:/app/quality_monitor.log \
#     mailq-quality-monitor

FROM python:3.11-slim

WORKDIR /app

# Install dependencies
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt anthropic

# Copy monitor script
COPY quality_monitor.py .

# Create volume mount points
VOLUME ["/app/quality_monitor.db", "/app/quality_monitor.log"]

# Run as daemon
CMD ["python", "quality_monitor.py", "--daemon"]
